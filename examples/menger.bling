
#
# Menger Sponge
#

filter mitchell 3.0 3.0 0.333333 0.333333

# imageSize 640 480
imageSize 320 240

renderer {
   sampler
   sampled {
      sampler { stratified xSamples 8 ySamples 8 }
      integrator { path maxDepth 7 sampleDepth 4 }
   }
}

# renderer { sampler sampled { sampler { random samples 1 } integrator { path maxDepth 5 sampleDepth 3 } } }
# renderer { sampler sampled { sampler { random samples 64 } integrator { bidir maxDepth 7 sampleDepth 4 } } }
# renderer { sampler sampled { sampler { random samples 4 } integrator { debug normals } } }
renderer { metropolis mpp 1 bootstrap 1000 plarge 0.25 }
# renderer { sampler sampled { sampler { random samples 8 } integrator { directLighting } } }
# renderer { sampler sampled { sampler { stratified xSamples 3 ySamples 3 } integrator { bidir maxDepth 7 sampleDepth 4 } } }

transform {
   lookAt {
      pos -2 3 -5
      look 1 -2 0
      up 0 1 0
   }
}

camera {
   perspective
   fov 40
   lensRadius 0.015
   focalDistance 3.5
}

#
# ground plane
#

transform {
   identity
   translate 0 -1 0
}

material {
   plastic
   kd {
      graphPaper 0.08
      tex1 { constant rgb 0.4 0.4 0.4 }
      tex2 { constant rgb 0.02 0.02 0.02 }

   }

   ks  {
      graphPaper 0.08
      tex1 { constant rgb 0.85 0.85 0.85 }
      tex2 { constant rgb 0.00 0.00 0.00 }

   }

   rough { constant 0.002 }
}

shape {
   mesh
   vertexCount 4
   faceCount 1
   v  50.0 -1 -50.0
   v -50.0 -1 -50.0
   v -50.0 -1  50.0
   v  50.0 -1  50.0
   f 3 2 1 0
}

#
# light source
#

material {
   metal
   eta {
      constant spd {
         298.757050 1.795000, 302.400421 1.812000, 306.133759 1.822625,
         309.960449 1.830000, 313.884003 1.837125, 317.908142 1.840000,
         322.036835 1.834250, 326.274139 1.824000, 330.624481 1.812000,
         335.092377 1.798000, 339.682678 1.782000, 344.400482 1.766000,
         349.251221 1.752500, 354.240509 1.740000, 359.374420 1.727625,
         364.659332 1.716000, 370.102020 1.705875, 375.709625 1.696000,
         381.489777 1.684750, 387.450562 1.674000, 393.600555 1.666000,
         399.948975 1.658000, 406.505493 1.647250, 413.280579 1.636000,
         420.285339 1.628000, 427.531647 1.616000, 435.032196 1.596250,
         442.800629 1.562000, 450.851562 1.502125, 459.200653 1.426000,
         467.864838 1.345875, 476.862213 1.242000, 486.212463 1.086750,
         495.936707 0.916000, 506.057861 0.754500, 516.600769 0.608000,
         527.592224 0.491750, 539.061646 0.402000, 551.040771 0.345500,
         563.564453 0.306000, 576.670593 0.267625, 590.400818 0.236000,
         604.800842 0.212375, 619.920898 0.194000, 635.816284 0.177750,
         652.548279 0.166000, 670.184753 0.161000, 688.800964 0.160000,
         708.481018 0.160875, 729.318665 0.164000, 751.419250 0.169500,
         774.901123 0.176000, 799.897949 0.181375, 826.561157 0.188000,
         855.063293 0.198125, 885.601257 0.210000
      }
   }
   k {
      constant spd {
         298.757050 1.920375, 302.400421 1.920000, 306.133759 1.918875,
         309.960449 1.916000, 313.884003 1.911375, 317.908142 1.904000,
         322.036835 1.891375, 326.274139 1.878000, 330.624481 1.868250,
         335.092377 1.860000, 339.682678 1.851750, 344.400482 1.846000,
         349.251221 1.845250, 354.240509 1.848000, 359.374420 1.852375,
         364.659332 1.862000, 370.102020 1.883000, 375.709625 1.906000,
         381.489777 1.922500, 387.450562 1.936000, 393.600555 1.947750,
         399.948975 1.956000, 406.505493 1.959375, 413.280579 1.958000,
         420.285339 1.951375, 427.531647 1.940000, 435.032196 1.924500,
         442.800629 1.904000, 450.851562 1.875875, 459.200653 1.846000,
         467.864838 1.814625, 476.862213 1.796000, 486.212463 1.797375,
         495.936707 1.840000, 506.057861 1.956500, 516.600769 2.120000,
         527.592224 2.326250, 539.061646 2.540000, 551.040771 2.730625,
         563.564453 2.880000, 576.670593 2.940625, 590.400818 2.970000,
         604.800842 3.015000, 619.920898 3.060000, 635.816284 3.070000,
         652.548279 3.150000, 670.184753 3.445812, 688.800964 3.800000,
         708.481018 4.087687, 729.318665 4.357000, 751.419250 4.610188,
         774.901123 4.860000, 799.897949 5.125813, 826.561157 5.390000,
         855.063293 5.631250, 885.601257 5.880000
      }
   }
   rough { constant 0.002 }
}

transform { identity translate 0 0 0 }

fractal { menger { box pmin -0.5 -0.5 -0.5 pmax 0.5 0.5 0.5 } level 2 }

material { blackbody }

emission { temp 4000 }
transform { identity translate 0 1 0 }
shape { sphere radius 0.15 }

# emission { rgb 100 100 100 }
emission { none }
transform { identity translate -5 5 0 }
shape { sphere radius 2 }
